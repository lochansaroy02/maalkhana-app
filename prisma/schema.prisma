generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model District {
  id           String @id @default(uuid())
  name         String
  email        String @unique
  passwordHash String // Store hashed password (never plain text)

  // Relations
  entries   MalkhanaEntry[]
  vehicles  SeizedVehicle[]
  releases  MalkhanaRelease[]
  movements MalkhanaMovement[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SeizedVehicle {
  id             String @id @default(cuid())
  districtId     String
  srNo           String
  gdNo           String
  gdDate         String
  underSection   String @default("207")
  vehicleType    String
  colour         String
  registrationNo String
  engineNo       String
  description    String
  status         String
  policeStation  String
  ownerName      String
  seizedBy       String
  caseProperty   String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  District  District @relation(fields: [districtId], references: [id])
}

model MalkhanaEntry {
  id           String @id @default(uuid())
  wine         Int?
  wineType     String
  srNo         String
  gdNo         String
  gdDate       String
  underSection String

  Year          String
  policeStation String
  IOName        String
  vadiName      String
  HM            String
  accused       String
  firNo         String?
  status        String
  entryType     String
  place         String
  boxNo         String
  courtNo       String
  courtName     String
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  District      District? @relation(fields: [districtId], references: [id])
  districtId    String?
}

model MalkhanaMovement {
  id             String  @id @default(cuid())
  srNo           String
  moveDate       String
  firNo          String
  underSection   String
  takenOutBy     String
  moveTrackingNo String
  movePurpose    String
  name           String
  photo          String?
  document       String?

  isReturned     Boolean  @default(false)
  receviedBy     String
  returnBackFrom String
  returnDate     DateTime

  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  District   District? @relation(fields: [districtId], references: [id])
  districtId String?
}

model MalkhanaRelease {
  id              String @id @default(cuid())
  srNo            String
  moveDate        String
  firNo           String
  underSection    String
  takenOutBy      String
  moveTrackingNo  String
  movePurpose     String
  name            String
  recevierName    String
  fathersName     String
  address         String
  mobile          String
  releaseItemName String

  photo    String?
  document String?

  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  District   District? @relation(fields: [districtId], references: [id])
  districtId String?
}

model Report {
  id            String @id @default(cuid())
  movementCount Int
}
